package com.omfys.bsat.javatrigger;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class RunBatchBatCmd {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		try {
//			File batFile = new File(
//					"D:/Oracle/OPA/OPA Setups/OPA_Nov2015_v12.2.1.218.0/opa/examples/determinations-batch/Horse Race/horse_batch_cmd.bat");
//
//			batFile.setExecutable(true);
//
//			Process exec = Runtime.getRuntime()
//					.exec("D:/Oracle/OPA/OPA Setups/OPA_Nov2015_v12.2.1.218.0/opa/examples/determinations-batch/Horse Race"
//							+ File.separator + batFile.getName());
//			int execwaitFor = exec.waitFor();
//
//			if (execwaitFor == 0) {
//
//				System.out.println("BAT script exec executed properly");
//
//			}
//			
//			 InputStream execin = exec.getInputStream();
//	            ByteArrayOutputStream execbaos = new ByteArrayOutputStream();
//	             
//	            int execc = -1;
//	            while((execc = execin.read()) != -1)
//	            {
//	            	execbaos.write(execc);
//	            }
//	             
//	            String execresponse = new String(execbaos.toByteArray());
//	            System.out.println("exec Response From Exe : "+execresponse);
//
// 			InputStream execerrorStream = exec.getErrorStream();
// 			
// 			ByteArrayOutputStream execbaos1 = new ByteArrayOutputStream();
//             
//	            int execc1 = -1;
//	            while((execc1 = execerrorStream.read()) != -1)
//	            {
//	            	execbaos1.write(execc1);
//	            }
//	             
//	            String execresponse1 = new String(execbaos1.toByteArray());
//	            System.out.println("exec Error From Exe : "+execresponse1);




			
//			Process pexec =  Runtime.getRuntime().exec("cmd /c start \"D:/Oracle/OPA/OPA Setups/OPA_Nov2015_v12.2.1.218.0/opa/examples/determinations-batch/Horse Race/horse_batch_cmd.bat\"") ;
//			
//			
//			
//			
//				int waitForpexec = pexec.waitFor();
//			
//				if(waitForpexec==0) {
//			
//			    System.out.println("BAT script executed pexec properly");
//			
//				}
//				
//				 InputStream pexecin = pexec.getInputStream();
//		            ByteArrayOutputStream pexecbaos = new ByteArrayOutputStream();
//		             
//		            int pexecc = -1;
//		            while((pexecc = pexecin.read()) != -1)
//		            {
//		            	pexecbaos.write(pexecc);
//		            }
//		             
//		            String pexecresponse = new String(pexecbaos.toByteArray());
//		            System.out.println("pexec Response From Exe : "+pexecresponse);
//
//	 			InputStream pexecerrorStream = pexec.getErrorStream();
//	 			
//	 			ByteArrayOutputStream pexecbaos1 = new ByteArrayOutputStream();
//	             
//		            int pexecc1 = -1;
//		            while((pexecc1 = pexecerrorStream.read()) != -1)
//		            {
//		            	pexecbaos1.write(pexecc1);
//		            }
//		             
//		            String pexecresponse1 = new String(pexecbaos1.toByteArray());
//		            System.out.println("pexec Error From Exe : "+pexecresponse1);
//
		            
//				 Process p2pexec =  Runtime.getRuntime().exec("cmd /c horse_batch_cmd.bat", null, new File("D:/Oracle/OPA/OPA Setups/OPA_Nov2015_v12.2.1.218.0/opa/examples/determinations-batch/Horse Race"));
//				 
//				 		
////				 p2pexec.waitFor();
//			 		int waitForp2pexec = p2pexec.waitFor();
//					 
//			 		if(waitForp2pexec==0) {
//			 
//			 		    System.out.println("BAT script p2pexec executed properly");
//			 
//			 		}
//
//        	            InputStream p2pexecin = p2pexec.getInputStream();
//        	            ByteArrayOutputStream p2pexecbaos = new ByteArrayOutputStream();
//        	             
//        	            int p2pexecc = -1;
//        	            while((p2pexecc = p2pexecin.read()) != -1)
//        	            {
//        	            	p2pexecbaos.write(p2pexecc);
//        	            }
//        	             
//        	            String p2pexecresponse = new String(p2pexecbaos.toByteArray());
//        	            System.out.println("p2pexec Response From Exe : "+p2pexecresponse);
//
//            			InputStream p2pexecerrorStream1 = p2pexec.getErrorStream();
//            			
//            			ByteArrayOutputStream p2pexecbaos1 = new ByteArrayOutputStream();
//       	             
//        	            int p2pexecc1 = -1;
//        	            while((p2pexecc1 = p2pexecerrorStream1.read()) != -1)
//        	            {
//        	            	p2pexecbaos1.write(p2pexecc1);
//        	            }
//        	             
//        	            String p2pexecresponse1 = new String(p2pexecbaos1.toByteArray());
//        	            System.out.println("p2pexec Error From Exe : "+p2pexecresponse1);

				 

        	            
        	            Process p2pexec =  Runtime.getRuntime().exec("cmd /c run-BPIL-ML12-454-1617-DB.bat", null, new File("D:/Oracle/OPA/OPA Setups/OPA_Nov2016_v12.2.5.644.0/opa/examples/determinations-batch/BPIL-ML12-454-1617"));
       				 
				 		
//       				 p2pexec.waitFor();
       			 		int waitForp2pexec = p2pexec.waitFor();
       					 
       			 		if(waitForp2pexec==0) {
       			 
       			 		    System.out.println("BAT script p2pexec executed properly");
       			 
       			 		}

               	            InputStream p2pexecin = p2pexec.getInputStream();
               	            ByteArrayOutputStream p2pexecbaos = new ByteArrayOutputStream();
               	             
               	            int p2pexecc = -1;
               	            while((p2pexecc = p2pexecin.read()) != -1)
               	            {
               	            	p2pexecbaos.write(p2pexecc);
               	            }
               	             
               	            String p2pexecresponse = new String(p2pexecbaos.toByteArray());
               	            System.out.println("p2pexec Response From Exe : "+p2pexecresponse);

                   			InputStream p2pexecerrorStream1 = p2pexec.getErrorStream();
                   			
                   			ByteArrayOutputStream p2pexecbaos1 = new ByteArrayOutputStream();
              	             
               	            int p2pexecc1 = -1;
               	            while((p2pexecc1 = p2pexecerrorStream1.read()) != -1)
               	            {
               	            	p2pexecbaos1.write(p2pexecc1);
               	            }
               	             
               	            String p2pexecresponse1 = new String(p2pexecbaos1.toByteArray());
               	            System.out.println("p2pexec Error From Exe : "+p2pexecresponse1);


               				List<String> cmdAndArgs = new ArrayList<String>();
               			    String [] arg = {"cmd", "/c", "run-BPIL-ML12-454-1617-DB.bat"};
               			    cmdAndArgs = Arrays.asList(arg);//.asList({"cmd", "/c", "horse_batch_cmd.bat"});
               			    File dir = new File("D:/Oracle/OPA/OPA Setups/OPA_Nov2016_v12.2.5.644.0/opa/examples/determinations-batch/BPIL-ML12-454-1617");
               	
               			    ProcessBuilder pb = new ProcessBuilder(cmdAndArgs);
               			    pb.directory(dir);
               			    Process pexepb = pb.start();
               			    
               	
               				int waitForpexepb = pexepb.waitFor();
               	
               				if(waitForpexepb ==0) {
               	
               				    System.out.println("BAT script pb p3 executed properly");
               				    
               					String message = "Batch processing completed successfully";
               					
               				    System.out.println(message);
               					
               					}else
               					{
               						System.out.println("BAT script pb p3 not executed properly");
                   				    
                   					String message = "Batch processing not completed successfully";
                   					
                   				    System.out.println(message);
               					}
               				
               			       InputStream pexepbin = pexepb.getInputStream();
               		            ByteArrayOutputStream pexepbbaos = new ByteArrayOutputStream();
               		             
               		            int pexepbc = -1;
               		            while((pexepbc = pexepbin.read()) != -1)
               		            {
               		            	pexepbbaos.write(pexepbc);
               		            }
               		             
               		            String pexepbresponse = new String(pexepbbaos.toByteArray());
               		            System.out.println("pexepb Response From Exe : "+pexepbresponse);
               	
               	   			InputStream pexepberrorStream1 = pexepb.getErrorStream();
               	   			
               	   			ByteArrayOutputStream pexepbbaos1 = new ByteArrayOutputStream();
               		             
               		            int pexepbc1 = -1;
               		            while((pexepbc1 = pexepberrorStream1.read()) != -1)
               		            {
               		            	pexepbbaos1.write(pexepbc1);
               		            }
               		             
               		            String pexepbresponse1 = new String(p2pexecbaos1.toByteArray());
               		            System.out.println("pexepb Error From Exe : "+pexepbresponse1);

               	            

//			List<String> cmdAndArgs = new ArrayList<String>();
//		    String [] arg = {"cmd", "/c", "horse_batch_cmd.bat"};
//		    cmdAndArgs = Arrays.asList(arg);//.asList({"cmd", "/c", "horse_batch_cmd.bat"});
//		    File dir = new File("D:\\Oracle\\OPA\\OPA Setups\\OPA_Nov2015_v12.2.1.218.0\\opa\\examples\\determinations-batch\\Horse Race");
//
//		    ProcessBuilder pb = new ProcessBuilder(cmdAndArgs);
//		    pb.directory(dir);
//		    Process pexepb = pb.start();
//		    
//
//			int waitForpexepb = pexepb.waitFor();
//
//			if(waitForpexepb ==0) {
//
//			    System.out.println("BAT script pb p3 executed properly");
//			    
//				String message = "Batch processing completed successfully";
//				
//			    System.out.println(message);
//				
//				}else
//				{
//				}
//			
//		       InputStream pexepbin = pexepb.getInputStream();
//	            ByteArrayOutputStream pexepbbaos = new ByteArrayOutputStream();
//	             
//	            int pexepbc = -1;
//	            while((pexepbc = pexepbin.read()) != -1)
//	            {
//	            	pexepbbaos.write(pexepbc);
//	            }
//	             
//	            String pexepbresponse = new String(pexepbbaos.toByteArray());
//	            System.out.println("pexepb Response From Exe : "+pexepbresponse);
//
//   			InputStream pexepberrorStream1 = pexepb.getErrorStream();
//   			
//   			ByteArrayOutputStream pexepbbaos1 = new ByteArrayOutputStream();
//	             
//	            int pexepbc1 = -1;
//	            while((pexepbc1 = pexepberrorStream1.read()) != -1)
//	            {
//	            	pexepbbaos1.write(pexepbc1);
//	            }
//	             
//	            String pexepbresponse1 = new String(p2pexecbaos1.toByteArray());
//	            System.out.println("pexepb Error From Exe : "+pexepbresponse1);

	             
//	            String filePath = "D:/Oracle/OPA/OPA Setups/OPA_Nov2015_v12.2.1.218.0/opa/examples/determinations-batch/Horse Race/horse_batch_cmd.bat";
//	                 
//	                Process pfilePath = Runtime.getRuntime().exec(filePath);
//	                 
//
//	                
//	                			int waitForpfilePath = pfilePath.waitFor();
//	                
//	                			if (waitForpfilePath == 0) {
//	                
//	                				System.out.println("BAT script pfilePath executed properly");
//	                
//	                			}
//	                			
//	                		    InputStream pfilePathin = pfilePath.getInputStream();
//	            	            ByteArrayOutputStream pfilePathbaos = new ByteArrayOutputStream();
//	            	             
//	            	            int pfilePathc = -1;
//	            	            while((pfilePathc = pfilePathin.read()) != -1)
//	            	            {
//	            	            	pfilePathbaos.write(pfilePathc);
//	            	            }
//	            	             
//	            	            String pfilePathresponse = new String(pfilePathbaos.toByteArray());
//	            	            System.out.println("pfilePath Response From Exe : "+pfilePathresponse);
//
//	               			InputStream pfilePatherrorStream1 = pfilePath.getErrorStream();
//	               			
//	               			ByteArrayOutputStream pfilePathbaos1 = new ByteArrayOutputStream();
//	            	             
//	            	            int pfilePathc1 = -1;
//	            	            while((pfilePathc1 = pfilePatherrorStream1.read()) != -1)
//	            	            {
//	            	            	pfilePathbaos1.write(pfilePathc1);
//	            	            }
//	            	             
//	            	            String pfilePathresponse1 = new String(pfilePathbaos1.toByteArray());
//	            	            System.out.println("pfilePath Error From Exe : "+pfilePathresponse1);

	                			
//	                			String filePath2 = "D:/Oracle/OPA/OPA Setups/OPA_Nov2015_v12.2.1.218.0/opa/examples/determinations-batch/Horse Race/horse_batch_cmd.bat";
////	                	        try {
//	                	             
//	                	            Process p = Runtime.getRuntime().exec(filePath2);
//	                	            p.waitFor();
//	                	            InputStream in = p.getInputStream();
//	                	            ByteArrayOutputStream baos = new ByteArrayOutputStream();
//	                	             
//	                	            int c = -1;
//	                	            while((c = in.read()) != -1)
//	                	            {
//	                	                baos.write(c);
//	                	            }
//	                	             
//	                	            String response = new String(baos.toByteArray());
//	                	            System.out.println("Response From Exe : "+response);
//	                	            
//	            	    			byte[] buf1 = new byte[300];
//	            	                
//	            	                			InputStream errorStream1 = p.getErrorStream();
//	            	                			
//	            	                			ByteArrayOutputStream baos1 = new ByteArrayOutputStream();
//	       	                	             
//	        	                	            int c1 = -1;
//	        	                	            while((c1 = errorStream1.read()) != -1)
//	        	                	            {
//	        	                	                baos1.write(c1);
//	        	                	            }
//	        	                	             
//	        	                	            String response1 = new String(baos1.toByteArray());
//	        	                	            System.out.println("Error From Exe : "+response1);
	        	                	            

	                	             
//	                	        } catch (Exception e) {
//	                	            e.printStackTrace();
//	                	        }


			
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} 
		catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

}
